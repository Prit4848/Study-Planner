<%- include('./partials/header') %>
  <div class="container mx-auto p-4">
    <div class="flex flex-col md:flex-row justify-between">
      <div class="md:w-2/3 bg-white p-6 rounded-lg shadow-md mb-4 md:mb-0 md:mr-4">
        <h2 class="text-3xl font-bold mb-2"><%= plan.title %></h2>
        <p class="mt-2 text-gray-700"><%= plan.description %></p>
        <p class="mt-2 text-gray-700"><strong>Date:</strong> <%= new Date(plan.date).toDateString() %></p>
        <div class="mt-4">
          <h3 class="text-xl font-semibold mb-2">Tasks</h3>
          <ul class="list-disc pl-5">
            <% plan.tasks.forEach(task => { %>
              <li class="mt-2 p-4 bg-gray-100 rounded-lg">
                <p><strong>Start Time:</strong> <%= task.startTime %> - <strong>End Time:</strong> <%= task.endTime %></p>
                <p><strong>Task Title:</strong> <%= task.title %></p>
                <p><%= task.description %></p>
                <span class="<%= task.completed ? 'text-green-500' : 'text-red-500' %> font-bold flex items-center">
                  <i class="<%= task.completed ? 'fas fa-check-circle' : 'fas fa-times-circle' %> mr-2"></i>
                  <%= task.completed ? 'Completed' : 'Pending' %>
                </span>
                <form action="/plan/<%= plan._id %>/<%= task._id %>/toggle" method="POST" class="mt-2">
                  <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300 ease-in-out">
                    <%= task.completed ? 'Mark as Pending' : 'Mark as Completed' %>
                  </button>
                </form>
              </li>
            <% }) %>
          </ul>
        </div>
        <div class="mt-4">
          <a href="/plan/<%= plan._id %>/<%= plan.userId %>/edit" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300 ease-in-out">Edit Plan</a>
        </div>
      </div>
      <div class="md:w-1/3 bg-white p-6 rounded-lg shadow-md">
        <h3 class="text-2xl font-semibold mb-4">Set Reminder</h3>
        <form action="/plan/<%= plan._id %>/set-reminder" method="POST">
          <label for="reminderDate" class="block text-gray-700">Select Date and Time:</label>
          <input type="datetime-local" id="reminderDate" name="reminderDate" required class="border p-2 rounded-md w-full mt-2">
          <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded-md mt-4 hover:bg-green-600 transition duration-300 ease-in-out w-full">Set Reminder</button>
        </form>
      </div>
    </div>
  </div>
  <%- include('./partials/footer') %>